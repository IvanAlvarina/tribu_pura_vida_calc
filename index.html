<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jose Bernard Investor Fix & Flip Calculator</title>
    <style>
        @import url('https://www.fontspace.com/a-big-deal-font-f51277');
        @import url('https://www.fontspace.com/agoestoesan-font-f14421');
        @import url('https://www.fontspace.com/aaargh-font-f11328');
        @import url('https://www.fontspace.com/amccd-font-f25168');

        .group:hover .tooltip {
        opacity: 1 !important;
        visibility: visible !important;
        }
    </style>
      <script src="https://cdn.tailwindcss.com"></script>
      <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

</head>
<body class="bg-gray-100 font-[Poppins]">
    <div class="max-w-7xl mx-auto p-4 md:p-6">
        <div class="bg-white shadow-lg rounded-lg p-6">
            <div class="flex justify-center mt-3">
                <img src="tribu_logo.jpg" alt="Tribu Logo" class="w-64 h-auto">
            </div>
            <h1 id="calculator-title" class="text-2xl font-bold text-center mb-4">Jose Bernard Investor Fix & Flip Calculator</h1>
            
            <div class="text-center mb-6">
                <button id="language-toggle" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md transition duration-200" onclick="toggleLanguage()">Español</button>
            </div>
            
            <div class="lg:flex lg:space-x-6">
                <!-- Calculator Form -->
                <div class="lg:w-1/2 bg-gray-50 p-6 rounded-lg shadow-md mb-6 lg:mb-0 flex-none h-[600px]">
                    <form id="calculator-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label id="label-home-price" class="block text-gray-700 mb-1 text-sm" for="home-price">
                                Home Price
                                <span class="relative inline-block cursor-help group">
                                    <span class="text-blue-600 cursor-pointer">ℹ️</span>
                                    <span id="tooltip-home-price" class="tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300">
                                        How much you're offering to buy the house
                                    </span>
                                </span>
                            </label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-2 flex items-center text-gray-500">$</span>
                                <input type="number" id="home-price" class="w-full p-2 pl-8 border border-gray-300 rounded" placeholder="E.g., 150000" required>
                            </div>
                        </div>                    
                        
                        <div>
                            <label id="label-down-payment-percentage" class="block text-gray-700 mb-1 text-sm"  for="down-payment-percentage">Down Payment Percentage
                                <span class="relative inline-block cursor-help group">
                                    <span class="text-blue-600 cursor-pointer">ℹ️</span>
                                    <span id="tooltip-down-payment" class="tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300">
                                        The percentage of the downpayment on your loan.
                                    </span>
                                </span>
                            </label>
                            <div class="flex items-center border border-gray-300 rounded p-2">
                                <input type="number" id="down-payment-percentage" class="w-full outline-none" placeholder="E.g., 20" required>
                                <span class="ml-2 text-gray-500">% </span>
                            </div>
                        </div>
                        <div class="pt-1"> 
                            <label id="label-loan-includes-renovation" class="block text-gray-700 mb-1 text-xs" for="loan-includes-renovation">Does the Loan Include Renovation Costs?</label>
                            <select id="loan-includes-renovation" class="w-full p-2 border border-gray-300 rounded" required>
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                        </div>
                        <div>
                            <label id="label-loan-interest" class="block text-gray-700 mb-1 text-sm" for="loan-interest">Interest Rate
                                <span class="relative inline-block cursor-help group">
                                    <span class="text-blue-600 cursor-pointer">ℹ️</span>
                                    <span id="tooltip-interest-rate" class="tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300">
                                        The interest rate of your loan.
                                    </span>
                                </span>
                            </label>
                            <div class="flex items-center border border-gray-300 rounded p-2">
                                <input type="number" id="loan-interest" class="w-full outline-none" placeholder="E.g., 5" step="0.01" required>
                                <span class="ml-2 text-gray-500">% </span>
                            </div>
                        </div>
                        <div>
                            <label id="label-holding-period" class="block text-gray-700 mb-1 text-sm" for="holding-period">Holding Period (Months)
                                <span class="relative inline-block cursor-help group">
                                    <span class="text-blue-600 cursor-pointer">ℹ️</span>
                                    <span id="tooltip-holding-period" class="tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300">
                                        The total months from purchase through renovation to sale.
                                    </span>
                            </label>
                            <input type="number" id="holding-period" class="w-full p-2 border border-gray-300 rounded" placeholder="E.g., 6" required>
                        </div>
                        <div>
                            <label id="label-renovation-cost" class="block text-gray-700 mb-1 text-sm" for="renovation-cost">Renovation Cost
                                <span class="relative inline-block cursor-help group">
                                    <span class="text-blue-600 cursor-pointer">ℹ️</span>
                                    <span id="tooltip-renovation-cost" class="tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300">
                                        The total cost of your renovations.
                                    </span>
                            </label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-2 flex items-center text-gray-500">$</span>
                                <input type="number" id="renovation-cost" class="w-full p-2 pl-8 border border-gray-300 rounded" placeholder="E.g., 50000" required>
                            </div>
                        </div>                        
                        <div class="pt-1">
                            <label class="block text-gray-700 mb-1 text-[11.5px]" id="label-purchase-closing-cost" for="purchase-closing-cost">Purchase Closing Cost Percentage
                                <span class="relative inline-block cursor-help group">
                                    <span class="text-blue-600 cursor-pointer">ℹ️</span>
                                    <span id="tooltip-purchase-closing" class="tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300">
                                        Fees related to the purchase closing, as a percentage of the home price
                                    </span>
                            </label>
                            <div class="flex items-center border border-gray-300 rounded p-2">
                                <input type="number" id="purchase-closing-cost" class="w-full outline-none" placeholder="E.g., 3" step="0.01" required>
                                <span class="ml-2 text-gray-700">%</span>
                            </div>
                        </div>  
                        <div>
                            <label id="label-property-taxes" class="block text-gray-700 mb-1 text-sm" for="property-taxes">Yearly Property Taxes
                                <span class="relative inline-block cursor-help group">
                                    <span class="text-blue-600 cursor-pointer">ℹ️</span>
                                    <span id="tooltip-property-taxes" class="tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300">
                                        Annual property taxes.
                                    </span>
                            </label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-2 flex items-center text-gray-500">$</span>
                                <input type="number" id="property-taxes" class="w-full p-2 pl-8 border border-gray-300 rounded" placeholder="E.g., 3000" required>
                            </div>
                        </div>                        
                        <div>
                            <label id="label-insurance" class="block text-gray-700 mb-1 text-sm" for="insurance">Yearly Insurance
                                <span class="relative inline-block cursor-help group">
                                    <span class="text-blue-600 cursor-pointer">ℹ️</span>
                                    <span id="tooltip-insurance" class="tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300">
                                        The annual premium for home insurance.
                                    </span>
                            </label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-2 flex items-center text-gray-500">$</span>
                                <input type="number" id="insurance" class="w-full p-2 pl-8 border border-gray-300 rounded" placeholder="E.g., 1200" required>
                            </div>
                        </div>
                        <div class="pt-1">
                            <label id="label-utilities" class="block text-gray-700 mb-1 text-xs" for="utilities">Estimated Monthly Utilities
                                <span class="relative inline-block cursor-help group">
                                    <span class="text-blue-600 cursor-pointer">ℹ️</span>
                                    <span id="tooltip-utilities" class="tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300">
                                        An estimate of your monthly gas, electricity, water, and sewer costs.
                                    </span>
                            </label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-2 flex items-center text-gray-500">$</span>
                                <input type="number" id="utilities" class="w-full p-2 pl-8 border border-gray-300 rounded" placeholder="E.g., 200" required>
                            </div>
                        </div>
                        <div>
                            <label id="label-after-repair-value" class="block text-gray-700 mb-1 text-sm" for="after-repair-value">After Repair Value (ARV)
                                <span class="relative inline-block cursor-help group">
                                    <span class="text-blue-600 cursor-pointer">ℹ️</span>
                                    <span id="tooltip-arv" class="tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300">
                                        The estimated sale price of the house after renovations.
                                    </span>
                            </label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-2 flex items-center text-gray-500">$</span>
                                <input type="number" id="after-repair-value" class="w-full p-2 pl-8 border border-gray-300 rounded" placeholder="E.g., 250000" required>
                            </div>
                        </div>

                        <div >
                            <label class="block text-gray-700 mb-1 text-sm" id="label-selling-cost" for="selling-cost">Selling Cost
                                <span class="relative inline-block cursor-help group">
                                    <span class="text-blue-600 cursor-pointer">ℹ️</span>
                                    <span id="tooltip-selling-cost" class="tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-48 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-opacity duration-300">
                                        Fees for closing the sale, calculated as a percentage of the sale price.
                                    </span>
                            </label>
                            <div class="flex items-center border border-gray-300 rounded p-2">
                                <input type="number" id="selling-cost" class="w-full outline-none" placeholder="E.g., 6" step="0.01" required>
                                <span class="ml-2 text-gray-700">%</span>
                            </div>
                        </div>
                    </form>
                    
                    <button id="calculate-button" type="button" onclick="calculate()" class="w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded font-medium mt-6 transition duration-200">Calculate</button>
                </div>
                
                <!-- Results Section -->
                <div id="results-container" class="lg:w-1/2 bg-gray-50 p-6 rounded-lg shadow-md hidden flex-grow">
                    <div id="result" class="mb-6">
                       
                    </div>
                    
                    <div id="scenarios">
                        
                    </div>
                </div>
            </div>
            
            <p id="disclaimer" class="text-xs text-center text-gray-500 mt-6">
                Disclaimer: This calculator provides estimates only. Perform additional analysis and due diligence before making any investment decisions.
            </p>
        </div>
    </div>
    
    <script>
         document.querySelectorAll("input[type='number']").forEach(input => {
            input.addEventListener("blur", function () {
                if (this.value && !this.value.includes(".")) {
                    this.value = parseFloat(this.value).toFixed(2);
                }
            });
        });
       let language = 'en';

        document.getElementById("language-toggle").addEventListener("click", function() {
            language = language === 'en' ? 'es' : 'en';
            updateLanguage();
        });

        function updateLanguage() {
            document.getElementById("language-toggle").innerText = language === 'en' ? "Español" : "English";

            const translations = {
                en: {
                    "label-home-price": "Home Price",
                    "label-down-payment-percentage": "Down Payment Percentage",
                    "label-loan-includes-renovation": "Does the Loan Include Renovation Costs?",
                    "label-loan-interest": "Interest Rate",
                    "label-holding-period": "Holding Period (Months)",
                    "label-renovation-cost": "Renovation Cost",
                    "label-purchase-closing-cost": "Purchase Closing Cost Percentage",
                    "label-property-taxes": "Yearly Property Taxes",
                    "label-insurance": "Yearly Insurance",
                    "label-utilities": "Estimated Monthly Utilities",
                    "label-after-repair-value": "After Repair Value (ARV)",
                    "label-selling-cost": "Selling Cost",
                    "calculate-button": "Calculate",
                    "disclaimer": "Disclaimer: This calculator provides estimates only. Perform additional analysis and due diligence before making any investment decisions.",
                    // Tooltip translations
                    "tooltip-home-price": "How much you're offering to buy the house",
                    "tooltip-down-payment": "The percentage of the downpayment on your loan.",
                    "tooltip-interest-rate": "The interest rate of your loan.",
                    "tooltip-holding-period": "The total months from purchase through renovation to sale.",
                    "tooltip-renovation-cost": "The total cost of your renovations.",
                    "tooltip-purchase-closing": "Fees related to the purchase closing, as a percentage of the home price",
                    "tooltip-property-taxes": "Annual property taxes.",
                    "tooltip-insurance": "The annual premium for home insurance.",
                    "tooltip-utilities": "An estimate of your monthly gas, electricity, water, and sewer costs.",
                    "tooltip-arv": "The estimated sale price of the house after renovations.",
                    "tooltip-selling-cost": "Fees for closing the sale, calculated as a percentage of the sale price."
                },
                es: {
                    "label-home-price": "Precio de la Casa",
                    "label-down-payment-percentage": "Porcentaje de Pago Inicial",
                    "label-loan-includes-renovation": "¿El préstamo incluye costos de renovación?",
                    "label-loan-interest": "Tasa de Interés",
                    "label-holding-period": "Período de Retención (Meses)",
                    "label-renovation-cost": "Costo de Renovación",
                    "label-purchase-closing-cost": "Porcentaje de Costos de Cierre de Compra",
                    "label-property-taxes": "Impuestos Anuales de Propiedad",
                    "label-insurance": "Seguro Anual",
                    "label-utilities": "Servicios Públicos Mensuales Estimados",
                    "label-after-repair-value": "Valor Después de Reparar (ARV)",
                    "label-selling-cost": "Costo de Venta",
                    "calculate-button": "Calcular",
                    "disclaimer": "Descargo de responsabilidad: Esta calculadora solo proporciona estimaciones.",
                    // Tooltip translations
                    "tooltip-home-price": "Cuánto estás ofreciendo para comprar la casa",
                    "tooltip-down-payment": "El porcentaje del pago inicial de tu préstamo.",
                    "tooltip-interest-rate": "La tasa de interés de tu préstamo.",
                    "tooltip-holding-period": "El total de meses desde la compra hasta la venta, incluyendo la renovación.",
                    "tooltip-renovation-cost": "El costo total de tus renovaciones.",
                    "tooltip-purchase-closing": "Honorarios relacionados con el cierre de la compra, como porcentaje del precio de la casa",
                    "tooltip-property-taxes": "Impuestos anuales de propiedad.",
                    "tooltip-insurance": "La prima anual del seguro de la casa.",
                    "tooltip-utilities": "Una estimación de tus costos mensuales de gas, electricidad, agua y alcantarillado.",
                    "tooltip-arv": "El precio de venta estimado de la casa después de las renovaciones.",
                    "tooltip-selling-cost": "Honorarios por cerrar la venta, calculados como porcentaje del precio de venta."
                }
            };

            // Update form labels while preserving tooltips
            for (const id in translations[language]) {
                if (id.startsWith("label-")) {
                    const labelElement = document.getElementById(id);
                    if (labelElement) {
                        // Find the first text node and update it
                        let textNodeFound = false;
                        for (const node of labelElement.childNodes) {
                            if (node.nodeType === Node.TEXT_NODE) {
                                node.nodeValue = translations[language][id];
                                textNodeFound = true;
                                break;
                            }
                        }
                        
                        // If no text node found, insert one at the beginning
                        if (!textNodeFound) {
                            const textNode = document.createTextNode(translations[language][id]);
                            labelElement.insertBefore(textNode, labelElement.firstChild);
                        }
                    }
                }
            }
            
            // Update all tooltips directly by ID
            for (const id in translations[language]) {
                if (id.startsWith("tooltip-")) {
                    const tooltipElement = document.getElementById(id);
                    if (tooltipElement) {
                        tooltipElement.textContent = translations[language][id];
                    }
                }
            }
            
            // Update select options for loan includes renovation
            if (document.getElementById("loan-includes-renovation")) {
                const selectElement = document.getElementById("loan-includes-renovation");
                const options = selectElement.options;
                
                if (language === 'en') {
                    options[0].text = "Yes";
                    options[1].text = "No";
                } else {
                    options[0].text = "Sí";
                    options[1].text = "No";
                }
            }
            
            // Update button text
            document.getElementById("calculate-button").innerText = translations[language]["calculate-button"];
            
            // Update placeholder text for inputs
            const placeholderTranslations = {
                en: {
                    "home-price": "E.g., 150000",
                    "down-payment-percentage": "E.g., 20",
                    "loan-interest": "E.g., 5",
                    "holding-period": "E.g., 6",
                    "renovation-cost": "E.g., 50000",
                    "purchase-closing-cost": "E.g., 3",
                    "property-taxes": "E.g., 3000",
                    "insurance": "E.g., 1200",
                    "utilities": "E.g., 200",
                    "after-repair-value": "E.g., 250000",
                    "selling-cost": "E.g., 6"
                },
                es: {
                    "home-price": "Ej., 150000",
                    "down-payment-percentage": "Ej., 20",
                    "loan-interest": "Ej., 5",
                    "holding-period": "Ej., 6",
                    "renovation-cost": "Ej., 50000",
                    "purchase-closing-cost": "Ej., 3",
                    "property-taxes": "Ej., 3000",
                    "insurance": "Ej., 1200",
                    "utilities": "Ej., 200",
                    "after-repair-value": "Ej., 250000",
                    "selling-cost": "Ej., 6"
                }
            };
            
            // Update placeholders
            for (const id in placeholderTranslations[language]) {
                const inputElement = document.getElementById(id);
                if (inputElement) {
                    inputElement.placeholder = placeholderTranslations[language][id];
                }
            }
            
            // Update disclaimer text if it exists
            const disclaimerElement = document.getElementById("disclaimer");
            if (disclaimerElement) {
                disclaimerElement.textContent = translations[language]["disclaimer"];
            }
        }
        
        function calculate() {

            // Check if any required field is empty
            const requiredFields = [
                'home-price', 'down-payment-percentage', 'loan-includes-renovation', 
                'loan-interest', 'holding-period', 'renovation-cost', 
                'purchase-closing-cost', 'property-taxes', 'insurance', 
                'utilities', 'after-repair-value', 'selling-cost'
            ];

            for (let fieldId of requiredFields) {
                const field = document.getElementById(fieldId);
                if (!field.value || (field.type === 'number' && isNaN(field.value))) {
                    alert('Please fill in all the required fields.');
                    return;
                }
            }

            var total_loan_amount;
            const homePrice = parseFloat(document.getElementById('home-price').value);
            const downPaymentPercentage = parseFloat(document.getElementById('down-payment-percentage').value) / 100;
            const loanIncludesRenovation = document.getElementById('loan-includes-renovation').value === 'yes';
            const loanIncludesRenovation_v2 = document.getElementById('loan-includes-renovation');
            const renovationCost = parseFloat(document.getElementById('renovation-cost').value);
            const loanInterestRate = parseFloat(document.getElementById('loan-interest').value);
            const holdingPeriod = parseFloat(document.getElementById('holding-period').value);
            const purchaseClosingCostPercentage = parseFloat(document.getElementById('purchase-closing-cost').value) / 100;
            const propertyTaxes = parseFloat(document.getElementById('property-taxes').value) / 12;

            const showPropertyTaxes = parseFloat(document.getElementById('property-taxes').value);

            const insurance = parseFloat(document.getElementById('insurance').value) / 12;

            const showInsurance = parseFloat(document.getElementById('insurance').value);

            const utilities = parseFloat(document.getElementById('utilities').value);
            const afterRepairValue = parseFloat(document.getElementById('after-repair-value').value);
            const sellingCostPercent = parseFloat(document.getElementById('selling-cost').value);
            
            var total_cash_needed_v2 =  0;

            if(loanIncludesRenovation_v2.value === 'yes') {
                    // When renovation is included, the loan amount is the sum of home price and renovation cost
                    total_loan_amount=(homePrice+renovationCost)*(1 - downPaymentPercentage);
                } else {
                    // If renovation is not included, the loan amount is just the home price
                    total_loan_amount = homePrice - (homePrice * downPaymentPercentage);
                    total_cash_needed_v2 += renovationCost;
            }
            const loanAmount = loanIncludesRenovation ? (homePrice + renovationCost) : homePrice;

            const downPayment = loanAmount * downPaymentPercentage;

            const monthlyInterest_v2 = (total_loan_amount * (loanInterestRate / 100)) / 12;

            const totalMonthlyCost = monthlyInterest_v2 + propertyTaxes + insurance + utilities;

            const totalHoldingCost = totalMonthlyCost * holdingPeriod;

            const purchaseClosingCost = loanIncludesRenovation ? (loanAmount * purchaseClosingCostPercentage) : (homePrice * purchaseClosingCostPercentage);

            const total_selling_cost = afterRepairValue * (sellingCostPercent / 100);
            
            total_cash_needed_v2 += downPayment + totalHoldingCost + purchaseClosingCost + total_selling_cost;

            const monthlyInterest = (loanAmount * (loanInterestRate / 100)) / 12;

            const holding_period_months = totalMonthlyCost * totalMonthlyCost;

            const total_loan_amount_v2 =(homePrice+renovationCost)*(1 - downPaymentPercentage);

            const sumup = (homePrice + renovationCost) / downPaymentPercentage;

            const baseSellingCost = (afterRepairValue * sellingCostPercent) / 100;
       
            const baseProfit = afterRepairValue - (homePrice + renovationCost) - totalHoldingCost - purchaseClosingCost - total_selling_cost;
           
            const baseROI = (baseProfit /  total_cash_needed_v2) * 100;

            document.getElementById('results-container').style.display = 'block';
            document.getElementById('result').style.display = 'block';
            
            document.getElementById('result').innerHTML = `<h3>Deal Financial Summary:</h3>
                <p>Down Payment: $${downPayment.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                <p>Total Loan Amount: $${total_loan_amount.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                <p>Monthly Interest Loan Payment: $${monthlyInterest_v2.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                <p>Total Monthly Holding Cost: $${totalMonthlyCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                <p>Total Project Holding Cost: $${totalHoldingCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                <p>Total Purchasing Closing Cost: $${purchaseClosingCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                <p>Total Selling Cost: $${total_selling_cost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                <p>Total Cash Needed: $${total_cash_needed_v2.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>`;

            // Scenario 1: Base Scenario
            const scenario1SellingCost = baseSellingCost;
            const scenario1Profit = baseProfit;
            const scenario1ROI = baseROI;

            // Scenario 2: +10% Renovation Cost, -10% ARV, +2 Months
            const scenario2ARV = afterRepairValue * 0.9;
            const scenario2RenovationCost = renovationCost * 1.1;
            const scenario2HoldingPeriod = holdingPeriod + 2;
            const scenario2TotalMonthlyCost = monthlyInterest + propertyTaxes + insurance + utilities;
            const scenario2TotalHoldingCost = scenario2TotalMonthlyCost * scenario2HoldingPeriod;
            const scenario2SellingCost = (scenario2ARV * sellingCostPercent) / 100;

            scenario2RenovationCost_v2 = renovationCost * 0.1;
            scenario2ARV_v2  = afterRepairValue * 0.1;
            scenarioProjectCost_v2 = totalMonthlyCost * 2;
            scenario_arv_new = scenario2ARV_v2 * (sellingCostPercent /  100);

            const scenario2Profit_before = scenario2RenovationCost_v2 +  scenario2ARV_v2 +  scenarioProjectCost_v2;
            const scenario2Profit_b = scenario1Profit - scenario2Profit_before;
            const scenario2Profit = scenario2Profit_b + scenario_arv_new;
            const scenario2ROI = (scenario2Profit / total_cash_needed_v2) * 100;
            
// ----------------------------------------------------------------------------------------------------------------------
            // Scenario 3: +20% Renovation Cost, -20% ARV, +4 Months
            const scenario3ARV = afterRepairValue * 0.8;
            const scenario3RenovationCost = renovationCost * 1.2;
            const scenario3HoldingPeriod = holdingPeriod + 4;
            const scenario3TotalMonthlyCost = monthlyInterest + propertyTaxes + insurance + utilities;
            const scenario3TotalHoldingCost = scenario3TotalMonthlyCost * scenario3HoldingPeriod;
            const scenario3SellingCost = (scenario3ARV * sellingCostPercent) / 100;

            scenario2RenovationCost_v3 = renovationCost * 0.2;
            scenario2ARV_v3  = afterRepairValue * 0.2;
            scenarioProjectCost_v3 = totalMonthlyCost * 4;
            scenario_arv_new_v3 = scenario2ARV_v3 * (sellingCostPercent /  100);

            const scenario3Profit_before = scenario2RenovationCost_v3 +  scenario2ARV_v3 +  scenarioProjectCost_v3;
            const scenario3Profit_b =  scenario1Profit - scenario3Profit_before;
            const scenario3Profit  =  scenario3Profit_b + scenario_arv_new_v3;
            const scenario3cashneeded = total_cash_needed_v2 + scenario2RenovationCost_v3 + scenarioProjectCost_v3;
            const scenario3ROI = (scenario3Profit /  scenario3cashneeded) * 100;

            if (language === 'es') {
                // Mostrar el Resumen Financiero del Acuerdo
                document.getElementById('result').innerHTML = `
                    <h3><strong>Resumen Financiero del Acuerdo</strong></h3><br>

                    <h2><strong>Resumen del Préstamo</strong></h2>
                    <p>Pago Inicial: $${downPayment.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Monto Total del Préstamo: $${total_loan_amount.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Pago Mensual de Intereses del Préstamo: $${monthlyInterest_v2.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p><br>

                    <h2><strong>Resumen de Costos de Retención</strong></h2>
                        * Pago Mensual del Impuesto a la Propiedad ($${showPropertyTaxes.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ÷ 12)<br>
                        * Pago Mensual del Seguro ($${insurance.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ÷ 12)<br>
                        * Servicios Públicos Mensuales ($${utilities.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })})<br>
                    <hr>
                    <p>Costo Total Mensual de Retención: $${totalMonthlyCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Costo Total de Retención del Proyecto: $${totalHoldingCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p><br>

                    <h2><strong>Resumen de Costos de Cierre</strong></h2>
                    <p>Costo Total de Cierre de Compra: $${purchaseClosingCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Costo Total de Cierre de Venta: $${total_selling_cost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p><br>

                    <h2><strong>Resumen de Efectivo Necesario</strong></h2>
                    <p>Pago Inicial: $${downPayment.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Costo Total de Retención del Proyecto: $${totalHoldingCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Costo Total de Cierre de Compra: $${purchaseClosingCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Efectivo Total Necesario: $${total_cash_needed_v2.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                `;

                document.getElementById('results-container').style.display = 'block';
                document.getElementById('scenarios').style.display = 'block';

                document.getElementById('scenarios').innerHTML = `
                    <h3 class="text-2xl font-bold mb-4">Resultados de Ganancia y Retorno de Inversión</h3>

                    <!-- Escenario 1 -->
                    <div class="flex justify-center items-center gap-8 mb-8">
                        <div class="flex flex-col items-center justify-center w-32 h-32 bg-blue-100 text-blue-700 font-bold rounded-full shadow-md">
                            <p>Ganancia</p>
                            <p>$${scenario1Profit.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                        </div>
                        <div class="flex flex-col items-center justify-center w-32 h-32 bg-green-100 text-green-700 font-bold rounded-full shadow-md">
                            <p>ROI</p>
                            <p>${scenario1ROI.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}%</p>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold mt-6 mb-4">Resultados de Escenarios Potenciales en el Peor Caso</h3>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Escenario 2 -->
                        <div class="p-4 border border-gray-300 rounded-lg shadow-md">
                            <h4 class="font-bold text-lg mb-2">Escenario Potencial en el Peor Caso I</h4>
                            <p class="text-gray-700 text-sm mb-4">
                                ¿Qué pasa si la renovación aumenta un 10%, tienes que descontar el precio de venta un 10% 
                                y terminas reteniendo la propiedad por 2 meses adicionales?
                            </p>
                            <div class="flex justify-center gap-6">
                                <div class="flex flex-col items-center justify-center w-24 h-24 bg-red-100 text-red-700 font-bold rounded-full shadow-md">
                                    <p>Ganancia</p>
                                    <p>$${scenario2Profit.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                                </div>
                                <div class="flex flex-col items-center justify-center w-24 h-24 bg-yellow-100 text-yellow-700 font-bold rounded-full shadow-md">
                                    <p>ROI</p>
                                    <p>${scenario2ROI.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}%</p>
                                </div>
                            </div>
                        </div>

                        <!-- Escenario 3 -->
                        <div class="p-4 border border-gray-300 rounded-lg shadow-md">
                            <h4 class="font-bold text-lg mb-2">Escenario Potencial en el Peor Caso II</h4>
                            <p class="text-gray-700 text-sm mb-4">
                                ¿Qué pasa si la renovación aumenta un 20%, tienes que descontar el precio de venta un 20% 
                                y terminas reteniendo la propiedad por 4 meses adicionales?
                            </p>
                            <div class="flex justify-center gap-6">
                                <div class="flex flex-col items-center justify-center w-24 h-24 bg-red-100 text-red-700 font-bold rounded-full shadow-md">
                                    <p>Ganancia</p>
                                    <p>$${scenario3Profit.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                                </div>
                                <div class="flex flex-col items-center justify-center w-24 h-24 bg-yellow-100 text-yellow-700 font-bold rounded-full shadow-md">
                                    <p>ROI</p>
                                    <p>${scenario3ROI.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

            } else {
                // Original English display code remains the same
                document.getElementById('result').innerHTML = `
                    <h3><strong>Deal Financial Summary</strong></h3><br>
                    
                    <h2><strong>Loan Summary</strong></h2>
                    <p>Down Payment: $${downPayment.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Total Loan Amount: $${total_loan_amount.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Monthly Interest Loan Payment: $${monthlyInterest_v2.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p><br>

                    <h2><strong>Holding Cost Summary</strong></h2>
                        * Monthly Property Tax Payment ($${showPropertyTaxes.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ÷ 12)<br>
                        * Monthly Insurance Payment ($${insurance.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ÷ 12)<br>
                        * Monthly Utilities ($${utilities.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })})<br>
                    <hr>
                    <p>Total Monthly Holding Cost: $${totalMonthlyCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Total Project Holding Cost: $${totalHoldingCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p><br>

                     <h2><strong>Closing Cost Summary</strong></h2>
                    <p>Total Purchasing Closing Cost: $${purchaseClosingCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Total Selling Closing Cost: $${total_selling_cost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p><br>

                    <h2><strong>Cash Needed Summary</strong></h2>
                    <p>Down Payment: $${downPayment.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Total Project Holding Cost: $${totalHoldingCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Total Purchasing Closing Cost: $${purchaseClosingCost.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                    <p>Total Cash Needed: $${total_cash_needed_v2.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                `;


                document.getElementById('results-container').style.display = 'block';
                document.getElementById('scenarios').style.display = 'block';

                document.getElementById('scenarios').innerHTML = `
                    <h3 class="text-2xl font-bold mb-4">Profit and Return on Investment Results</h3>

                    <!-- Scenario 1 -->
                    <div class="flex justify-center items-center gap-8 mb-8">
                        <div class="flex flex-col items-center justify-center w-32 h-32 bg-blue-100 text-blue-700 font-bold rounded-full shadow-md">
                            <p>Profit</p>
                            <p>$${scenario1Profit.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                        </div>
                        <div class="flex flex-col items-center justify-center w-32 h-32 bg-green-100 text-green-700 font-bold rounded-full shadow-md">
                            <p>ROI</p>
                            <p>${scenario1ROI.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}%</p>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold mt-6 mb-4">Potential Worst-Case Scenarios Results</h3>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Scenario 2 -->
                        <div class="p-4 border border-gray-300 rounded-lg shadow-md">
                            <h4 class="font-bold text-lg mb-2">Potential Worst-Case Scenario I</h4>
                            <p class="text-gray-700 text-sm mb-4">
                                What if your renovation goes over by 10%, you have to discount your sales price by 10%, 
                                and you end up holding the property for 2 additional months?
                            </p>
                            <div class="flex justify-center gap-6">
                                <div class="flex flex-col items-center justify-center w-24 h-24 bg-red-100 text-red-700 font-bold rounded-full shadow-md">
                                    <p>Profit</p>
                                    <p>$${scenario2Profit.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                                </div>
                                <div class="flex flex-col items-center justify-center w-24 h-24 bg-yellow-100 text-yellow-700 font-bold rounded-full shadow-md">
                                    <p>ROI</p>
                                    <p>${scenario2ROI.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}%</p>
                                </div>
                            </div>
                        </div>

                        <!-- Scenario 3 -->
                        <div class="p-4 border border-gray-300 rounded-lg shadow-md">
                            <h4 class="font-bold text-lg mb-2">Potential Worst-Case Scenario II</h4>
                            <p class="text-gray-700 text-sm mb-4">
                                What if your renovation goes over by 20%, you have to discount your sales price by 20%, 
                                and you end up holding the property for 4 additional months?
                            </p>
                            <div class="flex justify-center gap-6">
                                <div class="flex flex-col items-center justify-center w-24 h-24 bg-red-100 text-red-700 font-bold rounded-full shadow-md">
                                    <p>Profit</p>
                                    <p>$${scenario3Profit.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}</p>
                                </div>
                                <div class="flex flex-col items-center justify-center w-24 h-24 bg-yellow-100 text-yellow-700 font-bold rounded-full shadow-md">
                                    <p>ROI</p>
                                    <p>${scenario3ROI.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}%</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

            }
        }
    </script>
</body>
</html>
